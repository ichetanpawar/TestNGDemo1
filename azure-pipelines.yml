trigger:
- master

pool:
  #name: linux-agents
  vmImage: 'ubuntu-latest'

steps:
- script: |
   google-chrome --version
   sudo apt install google-chrome-stable
   sudo apt-get install testng
   sudo apt install maven
   sudo apt install oracle-java8-installer
   JAVA_HOME=/usr/lib/jvm/java-8-oracle
   java -cp "./lib/*:./bin"
   sudo apt-get install xvfb
   cd /home/vsts/work/1/s/src/
   chmod +x chromedriver
   java -cp "./lib/*:./bin" org.testng.TestNG testng.xml

- task: PublishPipelineArtifact@1
  inputs:
      targetPath: '$(Build.SourcesDirectory)/results'
      artifact: 'Results'
      publishLocation: 'pipeline'
  condition: succeededOrFailed()


